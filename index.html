<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Calendrier Gamer</title>
  <style>
    :root{
      --bg:#0b0f17;--panel:#131a2a;--accent:#7c3aed;--accent2:#06b6d4;
      --text:#e6eef8;--muted:#98a8bf;--danger:#ef4444;
    }
    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);margin:0;padding:0}
    h2{margin:0 0 6px}
    .app{max-width:1200px;margin:12px auto;padding:12px;display:grid;grid-template-columns:300px 1fr;gap:12px}
    .panel,.calendar{background:var(--panel);padding:14px;border-radius:12px;box-shadow:0 0 12px rgba(124,58,237,0.2)}
    button,select,input[type='text'],input[type='datetime-local']{
      background:#111827;color:var(--text);border:1px solid #1f2937;border-radius:6px;padding:6px;transition:0.2s
    }
    button:hover{background:var(--accent);color:white;cursor:pointer}
    .calendar .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
    .weekday{padding:6px;text-align:center;color:var(--muted);font-size:12px;border-bottom:1px solid #1f2937}
    .day{min-height:90px;border:1px solid #1f2937;border-radius:6px;padding:4px;position:relative;transition:0.2s}
    .day .date{position:absolute;top:4px;right:6px;font-size:11px;color:var(--muted)}
    .day.other-month{opacity:0.3}
    .event{display:block;margin-top:18px;padding:3px 6px;border-radius:6px;font-size:12px;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}
    .event.done{text-decoration:line-through;opacity:0.6}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:100}
    .modal{background:var(--panel);padding:14px;border-radius:12px;width:420px;max-width:95%}
  </style>
</head>
<body>
  <div class="app">
    <div class="panel">
      <h2>Options</h2>
      <button id="addEventBtn">‚ûï Ajouter</button>
      <button id="todayBtn">üìÖ Aujourd‚Äôhui</button>
      <h3 style="margin-top:12px">√âv√©nements du jour</h3>
      <ul id="dayEventsList" style="list-style:none;padding:0;font-size:13px;color:var(--muted)"></ul>
    </div>
    <div class="calendar">
      <div class="month-header">
        <button id="prevMonth">‚óÄ</button>
        <h2 id="monthYear"></h2>
        <button id="nextMonth">‚ñ∂</button>
      </div>
      <div class="grid" id="calendarGrid"></div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <h3 id="modalTitle">Nouvel √©v√©nement</h3>
      <label>Titre</label>
      <input type="text" id="eventTitle">
      <label>Date & heure</label>
      <input type="datetime-local" id="eventDate">
      <div style="margin-top:10px;display:flex;gap:6px">
        <button id="saveEvent">üíæ Sauver</button>
        <button id="cancelEvent">‚ùå Annuler</button>
      </div>
    </div>
  </div>

<script>
  const monthYear=document.getElementById('monthYear');
  const calendarGrid=document.getElementById('calendarGrid');
  const prevMonth=document.getElementById('prevMonth');
  const nextMonth=document.getElementById('nextMonth');
  const todayBtn=document.getElementById('todayBtn');
  const addEventBtn=document.getElementById('addEventBtn');
  const modalBackdrop=document.getElementById('modalBackdrop');
  const saveEvent=document.getElementById('saveEvent');
  const cancelEvent=document.getElementById('cancelEvent');
  const eventTitle=document.getElementById('eventTitle');
  const eventDate=document.getElementById('eventDate');
  const dayEventsList=document.getElementById('dayEventsList');

  let currentDate=new Date();
  let events=JSON.parse(localStorage.getItem('gamerEvents')||'[]');
  let editIndex=null;

  function renderCalendar(){
    const year=currentDate.getFullYear();
    const month=currentDate.getMonth();
    const firstDay=new Date(year,month,1);
    const lastDay=new Date(year,month+1,0);
    monthYear.textContent=currentDate.toLocaleString('fr-FR',{month:'long',year:'numeric'});

    calendarGrid.innerHTML='';
    // Ligne avec les jours de la semaine
    const weekdays=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];
    weekdays.forEach(d=>{
      const wd=document.createElement('div');
      wd.className="weekday";
      wd.textContent=d;
      calendarGrid.appendChild(wd);
    });

    let startDay=(firstDay.getDay()+6)%7; // lundi=0
    for(let i=0;i<startDay;i++){calendarGrid.appendChild(document.createElement('div'))}

    for(let d=1;d<=lastDay.getDate();d++){
      const div=document.createElement('div');div.className='day';
      const span=document.createElement('span');span.className='date';span.textContent=d;div.appendChild(span);
      const dayEvents=events.filter(e=>{
        const eDate=new Date(e.date);
        return eDate.getDate()===d && eDate.getMonth()===month && eDate.getFullYear()===year;
      });
      dayEvents.forEach(e=>{
        const ev=document.createElement('div');ev.className='event';if(e.done)ev.classList.add('done');
        ev.style.background=e.color||"#7c3aed";ev.textContent=e.title;
        div.appendChild(ev);
      });
      div.onclick=()=>showDayEvents(new Date(year,month,d));
      calendarGrid.appendChild(div);
    }
    showDayEvents(new Date());
  }

  function showDayEvents(date){
    const dayEvents=events.filter(e=>{
      const eDate=new Date(e.date);
      return eDate.getDate()===date.getDate() && eDate.getMonth()===date.getMonth() && eDate.getFullYear()===date.getFullYear();
    });
    dayEventsList.innerHTML='';
    if(dayEvents.length===0){dayEventsList.innerHTML='<li>Aucun √©v√©nement</li>'}
    else{dayEvents.forEach(e=>{let li=document.createElement('li');li.textContent=`${new Date(e.date).toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit'})} - ${e.title}`;dayEventsList.appendChild(li)})}
  }

  function openModal(e=null,i=null){
    modalBackdrop.style.display='flex';
    if(e){eventTitle.value=e.title;eventDate.value=e.date;editIndex=i}
    else{eventTitle.value='';eventDate.value='';editIndex=null}
  }
  function closeModal(){modalBackdrop.style.display='none'}

  saveEvent.onclick=()=>{
    if(!eventTitle.value||!eventDate.value){alert('Remplis tous les champs');return}
    const ev={title:eventTitle.value,date:eventDate.value,color:"#7c3aed",done:false};
    if(editIndex!==null){events[editIndex]=ev}else{events.push(ev)}
    localStorage.setItem('gamerEvents',JSON.stringify(events));
    closeModal();renderCalendar();
  };
  cancelEvent.onclick=closeModal;
  addEventBtn.onclick=()=>openModal();
  prevMonth.onclick=()=>{currentDate.setMonth(currentDate.getMonth()-1);renderCalendar()};
  nextMonth.onclick=()=>{currentDate.setMonth(currentDate.getMonth()+1);renderCalendar()};
  todayBtn.onclick=()=>{currentDate=new Date();renderCalendar()};

  renderCalendar();
</script>
</body>
</html>
